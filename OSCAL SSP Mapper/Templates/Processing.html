<!DOCTYPE html>

<html lang="en">
<head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><title>
	Home Page - OSCAL SSP Tool
</title><script src="/Scripts/modernizr-2.8.3.js"></script>
<link href="/Content/bootstrap.css" rel="stylesheet"/>
<link href="/Content/Site.css" rel="stylesheet"/>
<link href="favicon.ico" rel="shortcut icon" type="image/x-icon" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />
    <script type="text/javascript">
        function timedRefresh(timeoutPeriod) {
            setTimeout("location.reload(false);", timeoutPeriod);
        }

        function refresh() {
            setTimeout("location.reload(true);", 15000);
        }

        function ClickHiddenButton() {
            document.getElementById('HiddenButton').click();
            
        }

        function myFunction(text, percent) {
            document.getElementById("realmessage").innerText = text;
            document.getElementById("mainbar").style.width = percent;
            document.getElementById("realbar").innerText = percent
        }

    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body  onload="myFunction("","0%")">
    <form method="post" action="./Default" id="ctl01" enctype="multipart/form-data">
        <div class="aspNetHidden">
            <input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
            <input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
            <input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="Q4c3ykZZoE7oMdtuOYS7UedY/2iYESVgy3aQ/iGEKeNX6lUgwviie93y1EietwntzMLQd6DulAPljgQfb953gx7wCkmf6B0FzHHvl9dx0VvOWtH3wPooShah+jEQDv63qINQ0zU8gtt5xkNu9d1ZAI946CQsBeDRtZ/r7jEPmm9zjkMhJNk6WK9IJGaGUplgZI2FIhpJzklfaJlEW5hwEwxrVa8CS5B7IP/F3QbxY0EhBl9AuDkmbLm2VGseo+aW" />
        </div>

        <script type="text/javascript">
            //<![CDATA[
            var theForm = document.forms['ctl01'];
            if (!theForm) {
                theForm = document.ctl01;
            }
            function __doPostBack(eventTarget, eventArgument) {
                if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
                    theForm.__EVENTTARGET.value = eventTarget;
                    theForm.__EVENTARGUMENT.value = eventArgument;
                    theForm.submit();
                }
            }
            //]]>
        </script>



        <script src="/bundles/MsAjaxJs?v=D6VN0fHlwFSIWjbVzi6mZyE9Ls-4LNrSSYVGRU46XF81" type="text/javascript"></script>
        <script type="text/javascript">
            //<![CDATA[
            if (typeof (Sys) === 'undefined') throw new Error('ASP.NET Ajax client-side framework failed to load.');
            //]]>
        </script>

        <script src="Scripts/jquery-3.4.1.js" type="text/javascript"></script>
        <script src="Scripts/bootstrap.js" type="text/javascript"></script>
        <script src="/bundles/WebFormsJs?v=N8tymL9KraMLGAMFuPycfH3pXe6uUlRXdhtYv8A_jUU1" type="text/javascript"></script>
        <div class="aspNetHidden">

            <input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="CA0B0334" />
            <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="DCmotECBV5ZELQZRLtOx/wtxe7EClndKywnXUcHM1OKWSqKG4JdQYI8+ak09yAsDG8l1sMCawKnqW3LrrQnqSHkAy8DvAY6i0wner/C/nrcgsU3CQkUN9BKEsvZOj293ZNUSXkmKdCLZeKfXpFR9fQ==" />
        </div>
        <script type="text/javascript">
            //<![CDATA[
            Sys.WebForms.PageRequestManager._initialize('ctl00$ctl09', 'ctl01', ['tctl00$MainContent$updatepanel1', 'MainContent_updatepanel1'], [], ['ctl00$MainContent$UploadButton', 'MainContent_UploadButton'], 90, 'ctl00');
            //]]>
        </script>


        <nav class="navbar navbar-inverse">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a class="navbar-brand" runat="server" href="~/">OSCAL SSP Tool</a>
                </div>
              
            </div>
        </nav>
        <div class="container body-content">

            <script type="text/javascript">
                function showProgress() {

                    var updateProgress = $get("MainContent_UpdateProgress");
                    updateProgress.style.display = "block";
                }
                function ClickDiv() {

                    document.getElementById('MainContent_HiddenButton').click();
                }

                function refresh() {

                    // setTimeout("ClickHiddenButton(), 15000);
                    document.getElementById('MainContent_HiddenButton').click();
                }

                function Status() {
                    var text = Cache["1"]
                    document.getElementById("pemy").innerText = text;
                }

                function ClickHiddenButton() {

                    // document.getElementById("ErrorDiv").style ="background-color:azure";
                    document.getElementById('MainContent_HiddenButton').click();
                    // document.forms[0].submit();

                }

                //$('#fileuploadDiv').click(function (event) {
                //    $("#Status").load(location.href + "#Status");

                //});

            </script>
            <div id="fileuploadDiv" onclick="refresh()">
                <p id="pemy">

                </p>

            </div>
            <div id="Status">
                <span id="MainContent_Label1"></span>
            </div>
            <div hidden>
                <input type="submit" name="ctl00$MainContent$HiddenButton" value="Button" id="MainContent_HiddenButton" />
            </div>

            <div class="row">
                <div class="col-md-8">
                    <h2>Upload OSCAL SSP XML File</h2>
                    <p>
                        &nbsp;Browse to the OSCAL SSP XML file and click upload
                        to start process.
                    </p>
                    <p>
                        <strong>&nbsp;Note:</strong> <strong>&nbsp;The generation process can take several minutes to complete.</strong>
                    </p>
                    <p>
                        &nbsp;
                    </p>

                    <p>

                        <div id="MainContent_updatepanel1">

                            <input type="file" name="ctl00$MainContent$FileUpload1" id="MainContent_FileUpload1" size="50" style="width:500px;" />
                            <input type="submit" name="ctl00$MainContent$UploadButton" value="Upload" onclick="showProgress();" id="MainContent_UploadButton" controlid="UploadButton" />

                            <div id="MainContent_UpdateProgress" style="display:none;">

                                <div class="overlay">
                                    <div style=" z-index: 200; margin-left: 250px;margin-top:150px;opacity: 1;">
                                        <img alt="" src="../loading.gif" />
                                    </div>
                                </div>

                            </div>

                            <span id="MainContent_StatusLabel1" style="color:#009933;"></span>

                        </div>



                    </p>

                </div>
            </div>
            <div class="container">
                <p id="realmessage"></p>
                <div class="progress">
                    <div id="mainbar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0% ">
                        <span id="realbar" class="sr-only">0% Complete</span>
                    </div>
                </div>
            </div>






            <script type="text/javascript">

                var uniqueId = '793146e5-436f-4ac6-bc94-67f510299673';

                $(document).ready(function (event) {
                    $('#startProcess').click(function () {
                        $.post("Default/StartLongRunningProcess", { id: uniqueId }, function () {
                            $('#statusBorder').show();
                            getStatus();
                        });
                        event.preventDefault;
                    });
                });

                function getStatus() {
                    var url = 'Default/GetCurrentProgress/' + uniqueId;
                    $.get(url, function (data) {
                        if (data != "100") {
                            $('#status').html(data);
                            $('#statusFill').width(data);
                            window.setTimeout("getStatus()", 100);
                        }
                        else {
                            $('#status').html("Done");
                            $('#statusBorder').hide();
                            alert("The Long process has finished");
                        };
                    });
                }

            </script>

            <hr />
            <footer>
                <p>&copy; 2020 - OSCAL SSP Tool V1.0 - <a href="http://www.volpegroup.com" target="_blank">VITG INC.</a></p>
            </footer>
        </div>


        <script type="text/javascript">
            //<![CDATA[
            Sys.Application.add_init(function () {
                $create(Sys.UI._UpdateProgress, { "associatedUpdatePanelId": "MainContent_updatepanel1", "displayAfter": 500, "dynamicLayout": true }, null, null, $get("MainContent_UpdateProgress"));
            });
//]]>
        </script>
    </form>
</body>
</html>
